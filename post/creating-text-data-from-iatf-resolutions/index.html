<!DOCTYPE html><html lang="en-gb" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="CoMo Philippines">

  
  
  
    
  
  <meta name="description" content="We developed `covidphtext`, an R package that facilitates creation and structuring of text data from the resolutions issued by the Philippine Inter-agency Task Force for the Management of Emerging Infectious Diseases (IATF).">

  
  <link rel="alternate" hreflang="en-gb" href="/post/creating-text-data-from-iatf-resolutions/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu2841c55c99b54125efcb63e118ead72c_103426_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu2841c55c99b54125efcb63e118ead72c_103426_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/creating-text-data-from-iatf-resolutions/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="CoMo Philippines">
  <meta property="og:url" content="/post/creating-text-data-from-iatf-resolutions/">
  <meta property="og:title" content="Creating text data from IATF resolutions for use in text analysis | CoMo Philippines">
  <meta property="og:description" content="We developed `covidphtext`, an R package that facilitates creation and structuring of text data from the resolutions issued by the Philippine Inter-agency Task Force for the Management of Emerging Infectious Diseases (IATF)."><meta property="og:image" content="/post/creating-text-data-from-iatf-resolutions/featured.png">
  <meta property="twitter:image" content="/post/creating-text-data-from-iatf-resolutions/featured.png"><meta property="og:locale" content="en-gb">
  
    
      <meta property="article:published_time" content="2020-05-22T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-06-18T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/creating-text-data-from-iatf-resolutions/"
  },
  "headline": "Creating text data from IATF resolutions for use in text analysis",
  
  "image": [
    "/post/creating-text-data-from-iatf-resolutions/featured.png"
  ],
  
  "datePublished": "2020-05-22T00:00:00Z",
  "dateModified": "2020-06-18T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Chris Mercado"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "CoMo Philippines",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu2841c55c99b54125efcb63e118ead72c_103426_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "We developed `covidphtext`, an R package that facilitates creation and structuring of text data from the resolutions issued by the Philippine Inter-agency Task Force for the Management of Emerging Infectious Diseases (IATF)."
}
</script>

  

  


  
  
  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js" integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css" integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin="anonymous">
  
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#3f51b5",
          "text": "#fff"
        },
        "button": {
          "background": "#fff",
          "text": "#3f51b5"
        }
      },
      "theme": "classic",
      "content": {
        "message": "This website uses cookies to ensure you get the best experience on our website.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "/privacy/"
      }
    })});
  </script>



  





  <title>Creating text data from IATF resolutions for use in text analysis | CoMo Philippines</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">CoMo Philippines</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">CoMo Philippines</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/#"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  




















  
  


<div class="article-container pt-3">
  <h1>Creating text data from IATF resolutions for use in text analysis</h1>

  
  <p class="page-subtitle">Development of an R package for text data mining</p>
  

  


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span ><a href="/author/chris-mercado/">Chris Mercado</a></span>, <span ><a href="/author/john-robert-medina/">John Robert Medina</a></span>, <span ><a href="/author/ernest-guevarra/">Ernest Guevarra</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Jun 18, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    12 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/rstats/">rstats</a>, <a href="/category/software/">Software</a></span>
  

</div>

  













<div class="btn-links mb-3">
  
  








  









  
  <a class="btn btn-outline-primary my-1 mr-1" href="/project/topic-modelling/">
    Project
  </a>
  











</div>


</div>


<div class="article-header container featured-image-wrapper mt-4 mb-4" style="max-width: 600px; max-height: 692px;">
  <div style="position: relative">
    <img src="/post/creating-text-data-from-iatf-resolutions/featured.png" alt="" class="featured-image">
    <span class="article-header-caption">Image credit: CoMo Philippines</span>
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/d3/d3.min.js"></script>
<script src="/rmarkdown-libs/dagre/dagre-d3.min.js"></script>
<link href="/rmarkdown-libs/mermaid/dist/mermaid.css" rel="stylesheet" />
<script src="/rmarkdown-libs/mermaid/dist/mermaid.slim.min.js"></script>
<link href="/rmarkdown-libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="/rmarkdown-libs/chromatography/chromatography.js"></script>
<script src="/rmarkdown-libs/DiagrammeR-binding/DiagrammeR.js"></script>


<p>In line with our proposed project on use of text analysis and topic modelling for conducting policy analysis in relation to the <strong>COVID-19</strong> pandemic response in the Philippines, we first had to identify what sources of text were most appropriate for our purpose and then assess how we can extract text from these sources for our purposes. We knew it was always going to be a balance between having the most ideal sources of text data for what we want to do and those sources that could be mined of their text data in a reasonably efficient way.</p>
<p>In our search for sources, we found out about the IATF and its role/mandate to respond to the issues concerning emerging infectious diseases in the Philippines. The IATF was convened in early January 2020 in response to the growing outbreak in Wuhan, China. Since then, we found that the task force has released several resolutions that reflected the national government’s on-going assessment of the evolution and spread of COVID-19 and it’s intended response. Given this, we felt that the IATF resolutions were the key manifestation of the national government’s overarching policy with regard go the COVID-19 pandemic from which other more detailed and specific departmental and sub-national policies were derived from.</p>
<p>We noted that the <a href="https://www.doh.gov.ph">Department of Health</a>, which chairs the IATF, have routinely uploaded to their <a href="http://doh.gov.ph/COVID-19/IATF-Resolutions">website</a> copies of resolutions once they have been formally endorsed and signed by all departmental members. We later found out that IATF resolutions were also released via the country’s official journal, <a href="https://www.officialgazette.gov.ph">The Official Gazette</a>, online via its <a href="https://www.officialgazette.gov.ph/section/laws/other-issuances/inter-agency-task-force-for-the-management-of-emerging-infectious-diseases-resolutions/">website</a>. Based on these considerations, we decided to focus on using the IATF resolutions for our policy analysis project.</p>
<p>The next challenge was how to extract the text from these resolutions into a data structure and format useful for text analysis and topic modelling. In this post, we describe how we used the <a href="https://www.r-project.org">R language for statistical computing</a> to develop a supervised text extraction workflow described in the diagram below:</p>
<div class="figure" style="text-align: center"><span id="fig:workflow"></span>
<div id="htmlwidget-1" style="width:768px;height:800px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"diagram":"\n  graph TD\n    X(START) --> A[1. Download PDF] \n    A --> B[2. Read PDF]\n    B --> C[3. Clean text data]\n    C --> D[4. Structure text data]\n    D --> E[5. Save data]\n    E --> Y(END)\n  "},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1: Text extraction workflow in R
</p>
</div>
<div id="step-1-downloading-the-resolutions" class="section level2">
<h2>Step 1: Downloading the resolutions</h2>
<p>The resolutions are available either from the <a href="https://www.doh.gov.ph">DoH</a> <a href="https://www.doh.gov.ph/COVID-19/IATF-Resolutions">website</a> or from <a href="https://www.officialgazette.gov.ph">The Official Gazette</a> <a href="https://www.officialgazette.gov.ph/section/laws/other-issuances/inter-agency-task-force-for-the-management-of-emerging-infectious-diseases-resolutions/">website</a>. There are two key differences between these two sources. First, the <a href="https://www.doh.gov.ph">DoH</a> only provides resolutions starting from March 2020 at Resolution No. 9. Second, the <a href="https://www.doh.gov.ph">DoH</a> uploads the most recent resolutions a little bit later than <a href="https://www.officialgazette.gov.ph">The Official Gazette</a>.</p>
<p>We automated the bulk download of all available resolutions from either sources in <a href="https://www.r-project.org">R</a> by first creating a function that reads the HTML page/s for the resolutions and extracting the download links/URLs for each available resolution. Then, using these links, we created another function that downloads the PDFs into a temporary directory which can then be accessed for the next step of the workflow.</p>
<div id="extracting-download-linksurls-of-resolutions" class="section level3">
<h3>Extracting download links/URLs of resolutions</h3>
<p>To extract download links/URLs of resolutions from either sources, we created wrappers around web scraping functions in the <a href="https://rvest.tidyverse.org">rvest</a> package.</p>
<p>For the resolutions in the <a href="https://www.doh.gov.ph">DoH</a> website, we created the function <code>get_iatf_links</code>. This function only requires a single argument termed <code>base</code> which is the URL of the <a href="https://www.doh.gov.ph">DoH</a> webpage for IATF resolutions. The current URL for this is at <a href="https://www.doh.gov.ph/COVID-19/IATF-Resolutions" class="uri">https://www.doh.gov.ph/COVID-19/IATF-Resolutions</a> and this is what is used as default value for <code>base</code>. So, to get the links/URLs for the resolutions found in the <a href="https://www.doh.gov.ph">DoH</a> website, we use:</p>
<pre class="r"><code>get_iatf_links()</code></pre>
<p>which gives the following:</p>
<pre><code>## # A tibble: 41 x 7
##       id title              date       source type  url               checked   
##    &lt;dbl&gt; &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;             &lt;date&gt;    
##  1     9 Recommendations f… 2020-03-03 IATF   reso… https://doh.gov.… 2020-06-17
##  2    10 Recommendations f… 2020-03-09 IATF   reso… https://doh.gov.… 2020-06-17
##  3    11 Recommendations f… 2020-03-12 IATF   reso… https://doh.gov.… 2020-06-17
##  4    12 Recommendations f… 2020-03-13 IATF   reso… https://doh.gov.… 2020-06-17
##  5    13 Recommendations f… 2020-03-17 IATF   reso… https://doh.gov.… 2020-06-17
##  6    14 Resolutions Relat… 2020-03-20 IATF   reso… https://doh.gov.… 2020-06-17
##  7    15 Resolutions Relat… 2020-03-25 IATF   reso… https://doh.gov.… 2020-06-17
##  8    16 Additional Guidel… 2020-03-30 IATF   reso… https://doh.gov.… 2020-06-17
##  9    17 Recommendations R… 2020-03-30 IATF   reso… https://doh.gov.… 2020-06-17
## 10    18 Recommendations R… 2020-04-01 IATF   reso… https://doh.gov.… 2020-06-17
## # … with 31 more rows</code></pre>
<p>The result is a <code>tibble</code> with 7 columns and the number of rows equal to the number of resolutions available from the <a href="https://www.doh.gov.ph">DoH</a> website on the day the output was produced. The column named <code>checked</code> in the output indicates when it was produced. The number of rows of the output may change between two calls to this function as newer resolution/s may have been uploaded from the time the first call was made to the time the second call was made.</p>
<p>For the resolutions in <a href="https://www.officialgazette.gov.ph">The Official Gazette</a>, we created the <code>get_iatf_gazette</code> function. As with the <code>get_iatf_links</code> function, this requires the URL to the IATF resolutions webpage in <a href="https://www.officialgazette.gov.ph">The Official Gazette</a> which is set at <a href="https://www.officialgazette.gov.ph/section/laws/other-issuances/inter-agency-task-force-for-the-management-of-emerging-infectious-diseases-resolutions/" class="uri">https://www.officialgazette.gov.ph/section/laws/other-issuances/inter-agency-task-force-for-the-management-of-emerging-infectious-diseases-resolutions/</a>. However, a second argument named <code>pages</code> is required. Unlike the <a href="https://www.doh.gov.ph">DoH</a> page that has all the download links to the resolutions available on a single page, <a href="https://www.officialgazette.gov.ph">The Official Gazette</a> uses pagination to split the information on download links into multiple pages. To be able to get the links of all the resolutions, we would need to supply a vector of the page numbers of all the pages that contains the download links. So, to get the links/URLs for all available resolutions found in the <a href="https://www.officialgazette.gov.ph">The Official Gazette</a> website, we use:</p>
<pre class="r"><code>get_iatf_gazette(pages = 1:6)</code></pre>
<p>after determining from the website that the download links are contained in 6 pages.</p>
<p>This gives the following result:</p>
<pre><code>## # A tibble: 53 x 7
##       id title              date       source type  url               checked   
##    &lt;dbl&gt; &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;             &lt;date&gt;    
##  1    46 RESOLUTION NO. 46… 2020-06-15 IATF   reso… https://www.offi… 2020-06-17
##  2    46 RESOLUTION NO. 46… 2020-06-15 IATF   reso… https://www.offi… 2020-06-17
##  3    45 RESOLUTION NO. 45… 2020-06-10 IATF   reso… https://www.offi… 2020-06-17
##  4    44 RESOLUTION NO. 44… 2020-06-08 IATF   reso… https://www.offi… 2020-06-17
##  5    NA OMNIBUS GUIDELINE… 2020-06-03 IATF   reso… https://www.offi… 2020-06-17
##  6    43 RESOLUTION NO. 43… 2020-06-03 IATF   reso… https://www.offi… 2020-06-17
##  7    42 RESOLUTION NO. 42… 2020-06-01 IATF   reso… https://www.offi… 2020-06-17
##  8    41 RESOLUTION NO. 41… 2020-05-29 IATF   reso… https://www.offi… 2020-06-17
##  9    40 RESOLUTION NO. 40… 2020-05-27 IATF   reso… https://www.offi… 2020-06-17
## 10    NA OMNIBUS GUIDELINE… 2020-05-22 IATF   reso… https://www.offi… 2020-06-17
## # … with 43 more rows</code></pre>
<p>Notice that the ouput is the same in class and structure as the output of the previous function the only difference being that this produces more rows. This is because, as already mentioned earlier, <a href="https://www.officialgazette.gov.ph">The Official Gazette</a> has the first 8 resolutions issued in January and February 2020 and is updated soon after resolutions are endorsed and signed by the IATF compared to that of the <a href="https://www.doh.gov.ph">DoH</a>.</p>
</div>
<div id="downloading-the-resolutions" class="section level3">
<h3>Downloading the resolutions</h3>
<p>The most important information from the output from either functions is the column named <code>url</code> as this contains the links/URLs to the PDFs of the various resolutions.</p>
<p>We automated the download of the resolution PDFs from the <a href="https://www.doh.gov.ph">DoH</a> site using a convenience function called <code>get_iatf_pdf</code>. In this function, the user can choose which specific resolution to download by specifying the argument <code>id</code>. If the user wants to download the PDF for Resolution No. 29, the following call is made:</p>
<pre class="r"><code>iatfLinks %&gt;% 
  get_iatf_pdf(id = 29)</code></pre>
<p>which gives the following output:</p>
<pre><code>## [1] &quot;/var/folders/rx/nr32tl5n6f3d_86tn0tc7kc00000gp/T//RtmpEQY0KS/iatfResolution29.pdf&quot;</code></pre>
<p>The output is a character vector of the path to the temporary directory created where the PDF for Resolution No. 29 has been stored under the filename <strong>iatfResolution29.pdf</strong>.</p>
<p>It is considered best practice for a function that downloads something from the internet to save this download into a temporary directory as this is more secure and potentially less harmful for the user. It is also advantageous for the user as the PDFs do not have to be saved into the local computer but instead immediately read and used in <a href="https://www.r-project.org">R</a>.</p>
</div>
</div>
<div id="steps-2-3-and-4-reading-cleaning-and-structuring-text-data-from-the-resolutions" class="section level2">
<h2>Steps 2, 3 and 4: Reading, cleaning and structuring text data from the resolutions</h2>
<p>These steps form the supervised component of the workflow.</p>
<p>Using the output from the previous step, the PDF/s can be read into <a href="https://www.r-project.org">R</a> using the <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools</a> package. Typically, reading a PDF with <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools</a> would be as straightforward as:</p>
<pre class="r"><code>pdftools::pdf_text(pdf = &quot;PATH/TO/PDF&quot;)</code></pre>
<p>However, the IATF resolutions have been released as downloadable PDF documents produced by scanning the hard copy, signed versions of the resolutions. This type of PDF requires a different function from the <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools</a> package to extract the data:</p>
<pre class="r"><code>pdftools::pdf_ocr_text(pdf = &quot;PATH/TO/SCANNED/PDF&quot;)</code></pre>
<p>Whilst this type of document format can be read by <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools</a> package, the extracted text often requires a lot of manual cleaning and some words or phrases needing to be edited. Below is an example raw output after reading the PDF of IATF Resolution No. 29 and adding some linebreaks.</p>
<pre class="r"><code>iatfLinks %&gt;%                                ## Reference iatfLinks table
  get_iatf_pdf(id = 29) %&gt;%                  ## Download PDF of Resolution 29
  pdftools::pdf_ocr_text() %&gt;%               ## Extract text using OCR
  stringr::str_split(pattern = &quot;\n&quot;) %&gt;%     ## Split lines of text
  unlist() %&gt;%                               ## Unlist to create data.frame
  head(n = 30)                               ## Show first 30 rows/lines of text</code></pre>
<pre><code>## Converting page 1 to iatfResolution29_1.png... done!
## Converting page 2 to iatfResolution29_2.png... done!
## Converting page 3 to iatfResolution29_3.png... done!
## Converting page 4 to iatfResolution29_4.png... done!</code></pre>
<pre><code>##  [1] &quot;g \\ REPUBLIC OF THE PHILIPPINES&quot;                                                             
##  [2] &quot;&quot;                                                                                             
##  [3] &quot;; ay ; INTER-AGENCY TASK FORCE&quot;                                                               
##  [4] &quot;&quot;                                                                                             
##  [5] &quot;%, - FOR THE MANAGEMENT OF EMERGING INFECTIOUS DISEASES&quot;                                      
##  [6] &quot;“it Ore on Emer&quot;                                                                              
##  [7] &quot;&quot;                                                                                             
##  [8] &quot;RESOLUTION NO. 29&quot;                                                                            
##  [9] &quot;Series of 2020&quot;                                                                               
## [10] &quot;April 27, 2020&quot;                                                                               
## [11] &quot;RECOMMENDATIONS RELATIVE TO THE MANAGEMENT&quot;                                                   
## [12] &quot;OF THE CORONAVIRUS DISEASE 2019 (COVID-19) SITUATION&quot;                                         
## [13] &quot;&quot;                                                                                             
## [14] &quot;WHEREAS, on March 16, 2020, to prevent the sharp rise of COVID-19 cases in the&quot;               
## [15] &quot;country, the President placed the entirety of Luzon under Enhanced Community Quarantine until&quot;
## [16] &quot;April 14, 2020;&quot;                                                                              
## [17] &quot;&quot;                                                                                             
## [18] &quot;WHEREAS, on March 30, 2020, to develop a science-based approach in determining&quot;               
## [19] &quot;whether the Enhanced Community Quarantine in Luzon should be totally or partially lifted,&quot;    
## [20] &quot;extended, or expanded to other areas, the Inter-Agency Task Force (IATF) convened a&quot;          
## [21] &quot;sub-Technical Working Group tasked to define parameters in assessing recent developments in&quot;  
## [22] &quot;the Philippine COVID-19 situation;&quot;                                                           
## [23] &quot;&quot;                                                                                             
## [24] &quot;WHEREAS, on April 3, 2020, the [ATF finalized the parameters for deciding on the&quot;             
## [25] &quot;lifting or extension of the Enhanced Community Quarantine in Luzon, which include trends on&quot;  
## [26] &quot;the COVID-19 epidemiological curve, the health capacity of the country, social factors,&quot;      
## [27] &quot;economic factors, and security factors;&quot;                                                      
## [28] &quot;&quot;                                                                                             
## [29] &quot;WHEREAS, on April 7, 2020, upon the recommendation of the IATF, the President&quot;                
## [30] &quot;extended the implementation of the Enhanced Community Quarantine over the entirety of Luzon&quot;</code></pre>
<p>This is the reason why <strong>Steps 2</strong>, <strong>3</strong> and <strong>4</strong> cannot be automated algorithmically or in an unsupervised approach.</p>
<p>Following is the complete script used to read, clean and structure Resolution No. 29 in a manner that is amenable for text analysis:</p>
<pre class="r"><code>## Read and re-structure text data
y &lt;- iatfLinks %&gt;%                           ## Reference iatfLinks table
  get_iatf_pdf(id = 29) %&gt;%                  ## Download PDF of Resolution 29
  pdftools::pdf_ocr_text() %&gt;%               ## Extract text using OCR
  stringr::str_split(pattern = &quot;\n&quot;) %&gt;%     ## Split lines of text
  unlist()                                   ## Unlist to create data.frame

## Restructure text and clean
y &lt;- y[c(14:48, 55:90, 98:109, 115:149)]
y &lt;- y[y != &quot;&quot;]

y[69] &lt;- &quot;Francisco T. Duque III       Karlo Alexei B. Nograles&quot;
y[70] &lt;- &quot;Secretary, Department of Health     Cabinet Secretary, Office of the Cabinet Secretary&quot;
y[71] &lt;- &quot;IATF Chairperson         IATF Co-Chairperson&quot;
y[74] &lt;- &quot;1. I am presently an Assistant Secretary of the Department of Health;&quot;
y[83] &lt;- stringr::str_replace(string = y[83], pattern = &quot;\\[&quot;, replacement = &quot;I&quot;)
y[84] &lt;- stringr::str_replace(string = y[84], pattern = &quot;\\[&quot;, replacement = &quot;I&quot;)
y[87] &lt;- stringr::str_replace(string = y[87], pattern = &quot;\\[&quot;, replacement = &quot;I&quot;)
y[93] &lt;- stringr::str_replace(string = y[93], pattern = &quot;1g!&quot;, replacement = &quot;28th&quot;)
y[95] &lt;- &quot;Kenneth G. Ronquillo, MD, MPHM&quot;
y[97] &lt;- stringr::str_replace(string = y[97], pattern = &quot;\\[&quot;, replacement = &quot;I&quot;)

y &lt;- stringr::str_trim(string = y, side = &quot;both&quot;)

## Add heading
y &lt;- c(c(&quot;Republic of the Philippines&quot;,
         &quot;Inter-Agency Task Force&quot;,
         &quot;for the Management of Emerging Infectious Diseases&quot;,
         &quot;Resolution No. 29&quot;,
         &quot;Series of 2020&quot;,
         &quot;27 April 2020&quot;,
         &quot;Recommendations relative to the management&quot;,
         &quot;of the coronavirus disease 2019 (COVID-19) situation&quot;), y)

## Add section
pStart &lt;- which(stringr::str_detect(string = y, pattern = &quot;WHEREAS&quot;))[1]
oStart &lt;- which(stringr::str_detect(string = y, pattern = &quot;RESOLVED&quot;))[1]
pEnd   &lt;- oStart - 1
eStart &lt;- which(stringr::str_detect(string = y, pattern = &quot;APPROVED&quot;))[1]
oEnd   &lt;- eStart - 1
cStart &lt;- which(stringr::str_detect(string = y, pattern = &quot;CERTIFICATE|CERTIFICATION&quot;))
eEnd   &lt;- cStart - 1

section &lt;- NULL
section[1:8]              &lt;- &quot;heading&quot;
section[pStart:pEnd]      &lt;- &quot;preamble&quot;
section[oStart:oEnd]      &lt;- &quot;operative&quot;
section[eStart:eEnd]      &lt;- &quot;endorsement&quot;
section[cStart:length(y)] &lt;- &quot;certification&quot;

## Re-structure text data.frame
y &lt;- data.frame(linenumber = 1:length(y),
                text = y,
                source = &quot;IATF&quot;,
                type = &quot;resolution&quot;,
                id = 29,
                section = section,
                date = as.Date(&quot;27/04/2020&quot;, format = &quot;%d/%m/%y&quot;),
                stringsAsFactors = FALSE)

## Convert data.frame to tibble
iatfResolution29 &lt;- tibble::tibble(y)</code></pre>
<p>This results in the following text data:</p>
<pre><code>## # A tibble: 105 x 7
##    linenumber text                        source type      id section date      
##         &lt;int&gt; &lt;chr&gt;                       &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
##  1          1 Republic of the Philippines IATF   resol…    29 heading 2020-04-27
##  2          2 Inter-Agency Task Force     IATF   resol…    29 heading 2020-04-27
##  3          3 for the Management of Emer… IATF   resol…    29 heading 2020-04-27
##  4          4 Resolution No. 29           IATF   resol…    29 heading 2020-04-27
##  5          5 Series of 2020              IATF   resol…    29 heading 2020-04-27
##  6          6 27 April 2020               IATF   resol…    29 heading 2020-04-27
##  7          7 Recommendations relative t… IATF   resol…    29 heading 2020-04-27
##  8          8 of the coronavirus disease… IATF   resol…    29 heading 2020-04-27
##  9          9 WHEREAS, on March 16, 2020… IATF   resol…    29 preamb… 2020-04-27
## 10         10 country, the President pla… IATF   resol…    29 preamb… 2020-04-27
## # … with 95 more rows</code></pre>
</div>
<div id="step-5-save-the-data" class="section level2">
<h2>Step 5: Save the data</h2>
<p>Once data have been read, processed and structured, they are saved in <code>.rda</code> format for further use in text analysis or topic modelling with <a href="https://www.r-project.org">R language for statistical computing</a>. To allow for replicability of the whole data extraction, processing and structuring process and to facilitate ease of distribution of the text data outputs, we packaged the functions we’ve developed and the datasets we produced into a standard, portable <a href="https://www.r-project.org">R</a> package named <code>covidphtext</code>. We then made the package available via <a href="https://github.io/como-ph/covidphtext">GitHub</a> from which those requiring the functions we developed and the text datasets we’ve produced can install the package. A detailed description of the package including installation and use can be found <a href="https://como-ph.github.io/covidphtext">here</a>.</p>
<p><br>
<br></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/iatf/">IATF</a>
  
  <a class="badge badge-light" href="/tag/text-analysis/">text analysis</a>
  
  <a class="badge badge-light" href="/tag/text-data/">text data</a>
  
  <a class="badge badge-light" href="/tag/topic-modelling/">topic modelling</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/creating-text-data-from-iatf-resolutions/&amp;text=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/creating-text-data-from-iatf-resolutions/&amp;t=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis&amp;body=/post/creating-text-data-from-iatf-resolutions/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/creating-text-data-from-iatf-resolutions/&amp;title=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis%20/post/creating-text-data-from-iatf-resolutions/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/creating-text-data-from-iatf-resolutions/&amp;title=Creating%20text%20data%20from%20IATF%20resolutions%20for%20use%20in%20text%20analysis" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
    
    
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/chris-mercado/avatar_huf4874e929d75535f10def1b9178bc16a_201838_270x270_fill_q90_lanczos_center.jpg" alt="Chris Mercado">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/author/chris-mercado/">Chris Mercado</a></h5>
        <h6 class="card-subtitle">Advisor</h6>
        <p class="card-text">I have research experience and interest in infectious disease epidemiology, spatial analysis for public health, and public health surveillance.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/cegmercado/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://orcid.org/0000-0002-5588-9543" target="_blank" rel="noopener">
        <i class="fab fa-orcid"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/cegmercado" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  
    
    





  
    
    
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/john-robert-medina/avatar_hu1666891a2eecef85a404d0173fa6b819_34213_270x270_fill_q90_lanczos_center.jpeg" alt="John Robert Medina">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/author/john-robert-medina/">John Robert Medina</a></h5>
        <h6 class="card-subtitle">Team Leader</h6>
        <p class="card-text">Experienced Health Science Researcher. Skilled in Statistical Data Analysis, Research Design, Technical Documentation, and Technical Writing.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/john-robert-medina-49ba22122/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://orcid.org/0000-0001-6647-5453" target="_blank" rel="noopener">
        <i class="fab fa-orcid"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/JohnRobert01" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  
    
    





  
    
    
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/ernest-guevarra/avatar_hu4f9a547149ed73977cb3e5de1c9e7ab2_7097_270x270_fill_q90_lanczos_center.jpeg" alt="Ernest Guevarra">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/author/ernest-guevarra/">Ernest Guevarra</a></h5>
        <h6 class="card-subtitle">Advisor</h6>
        <p class="card-text">Public health specialist, spatial epidemiologist, R developer</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/ernestguevarra" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=U9scwmIAAAAJ&amp;hl=en" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/ernestguevarra" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  












  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/applying-sentiment-analysis/">Applying sentiment analysis on IATF resolutions</a></li>
      
      <li><a href="/project/topic-modelling/">Use of text analysis and topic modelling in policy analysis</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js" integrity="sha256-lyWCDMnMeZiXRi7Zl54sZGKYmgQs4izcT7+tKc+KUBk=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    © CoMo Philippines 2020
  </p>

  
  





  
  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">
      <img src="https://search.creativecommons.org/static/img/cc_icon.svg" alt="CC icon">
      <img src="https://search.creativecommons.org/static/img/cc-by_icon.svg" alt="CC by icon">
      
        <img src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" alt="CC NC icon">
      
      
        <img src="https://search.creativecommons.org/static/img/cc-nd_icon.svg" alt="CC ND icon">
      
    </a>
  </p>




  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
